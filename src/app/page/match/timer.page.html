<section class="flex-col gap-6">
	<h4>Playing {{ match()?.name ?? 'any game' }} match</h4>

	<p>Now, on round #{{ round() }}, turn #{{ turn() }}</p>

	<div class="flex-col gap-2">
		<h5>Round order</h5>

		<ul>
			@for (player of playersOrder(); track player.uuid) {
				<li>{{ player.name }} ({{ player.uuid.split('-')[0] }})</li>
			}
		</ul>
	</div>

	<ul>
		@for (turn of matchTurns(); track $index; let index = $index) {
			@if (index % 3 === 0) {
				<li class="mt-4">
					<strong>Round {{ index / 3 + 1 }}</strong>
					<hr />
				</li>
			}
			<li>
				{{ playerByUuid()(turn.playerUuid)?.name }} -
				<!-- {{ turn.playerUuid.split('-')[0] }} -->
				{{ turn.time | elapsedTime }}
			</li>
		}
	</ul>

	<p>Playing {{ currentPlayer()?.name }} - with {{ currentTimeRunning() | elapsedTime }} current</p>

	<h2 class="text-center color-accent">
		@let currentTurnValue = currentTurn();

		@if (currentTurnValue) {
			{{ currentTurnValue.time + currentTimeRunning() | elapsedTime }}
		}
	</h2>

	<ul class="buttons flex-row gap-6 justify-center">
		<li>
			<button class="button surface-contrast p-4">
				<app-svg icon="backward" squared color="surface-primary" />
			</button>
		</li>
		<li>
			<button class="button surface-contrast p-4">
				<app-svg icon="stop" squared color="surface-primary" />
			</button>
		</li>
		<li>
			<button
				class="button surface-contrast p-4"
				[class]="{ play: !timerIsRunning() }"
				(click)="togglePlayPauseEvent()"
			>
				<app-svg [icon]="timerIsRunning() ? 'pause' : 'play'" squared color="surface-primary" />
			</button>
		</li>
		<li>
			<button class="button surface-contrast p-4">
				<app-svg icon="forward" squared color="surface-primary" (click)="dispatch('NEXT_TURN')" />
			</button>
		</li>
	</ul>

	<div class="flex-col gap-2">
		<h5>Events</h5>

		<ul>
			@for (event of events()?.toReversed(); track event.uuid) {
				<li>
					{{ event.type }}, {{ event.createdAt | date: 'd MMM' }} at
					{{ event.createdAt | date: 'hh:mm:ss' }}
				</li>
			}
		</ul>
	</div>
</section>
